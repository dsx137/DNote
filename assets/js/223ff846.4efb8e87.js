"use strict";(self.webpackChunkd_note=self.webpackChunkd_note||[]).push([[7220],{4678:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>p,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var r=t(4848),o=t(8453);const a={},s="LdapConfig",i={id:"notes/\u7b14\u8bb0/\u6846\u67b6/SpringBoot/LDAP/LdapConfig",title:"LdapConfig",description:"",source:"@site/docs/notes/\u7b14\u8bb0/\u6846\u67b6/SpringBoot/LDAP/LdapConfig.md",sourceDirName:"notes/\u7b14\u8bb0/\u6846\u67b6/SpringBoot/LDAP",slug:"/notes/\u7b14\u8bb0/\u6846\u67b6/SpringBoot/LDAP/LdapConfig",permalink:"/DNote/docs/notes/\u7b14\u8bb0/\u6846\u67b6/SpringBoot/LDAP/LdapConfig",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"frameworkSidebar",previous:{title:"1.\u63a7\u5236\u5668",permalink:"/DNote/docs/notes/\u7b14\u8bb0/\u6846\u67b6/SpringBoot/\u57fa\u7840/1.\u63a7\u5236\u5668"},next:{title:"LdapRepository",permalink:"/DNote/docs/notes/\u7b14\u8bb0/\u6846\u67b6/SpringBoot/LDAP/LdapRepository"}},p={},c=[];function d(n){const e={code:"code",h1:"h1",header:"header",pre:"pre",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"ldapconfig",children:"LdapConfig"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'/**\n * <p>LDAP\u914d\u7f6e\u7c7b</p>\n */\n@Configuration\npublic class LdapConfig {\n\n    @Value("${spring.ldap.urls}")\n    private String ldapUrl;\n    @Value("${spring.ldap.base}")\n    private String base;\n    @Value("${spring.ldap.username}")\n    private String userName;\n    @Value("${spring.ldap.password}")\n    private String password;\n\n    /**\n     * <p>\u521b\u5efa\u4e00\u4e2aLDAP\u4e0a\u4e0b\u6587\u6e90\u7684Bean\u5b9a\u4e49</p>\n     * <p>LDAP\u4e0a\u4e0b\u6587\u662f\u4e13\u95e8\u7528\u6765\u8fde\u63a5LDAP\u5e93\u7684\u73af\u5883</p>\n     *\n     * @return \u8fd4\u56de{@link LdapContextSource}\u5bf9\u8c61\n     */\n    @Bean\n    public LdapContextSource ldapContextSource() {\n        LdapContextSource source = new LdapContextSource();\n        source.setUrl(this.ldapUrl);\n        source.setUserDn(this.userName);\n        source.setPassword(this.password);\n        source.setBase(this.base);\n//        source.setAuthenticationStrategy(new ExternalTlsDirContextAuthenticationStrategy());\n        return source;\n    }\n\n\n    /**\n     * <p>\u521b\u5efa\u4e00\u4e2a{@link LdapTemplate}\u7684Bean\u5b9a\u4e49</p>\n     * <p>{@link LdapTemplate}\u662fSpring\u63d0\u4f9b\u7684\u4e00\u4e2a\u7528\u4e8eLDAP\u64cd\u4f5c\u7684\u5de5\u5177\u7c7b</p>\n     *\n     * @return \u8fd4\u56de{@link LdapTemplate}\u5bf9\u8c61\n     */\n    @Bean\n    public LdapTemplate ldapTemplate() {\n        return new LdapTemplate(ldapContextSource());\n    }\n\n    public AuthenticationManager getLdapAuthenticationManager() {\n        LdapBindAuthenticationManagerFactory factory = new LdapBindAuthenticationManagerFactory(ldapContextSource());\n        factory.setUserDnPatterns(\n                "cn={0},ou=member,ou=user"\n//                "uid={0},ou=member," + base\n        );\n        return factory.createAuthenticationManager();\n    }\n\n}\n'})})]})}function u(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>i});var r=t(6540);const o={},a=r.createContext(o);function s(n){const e=r.useContext(a);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),r.createElement(a.Provider,{value:e},n.children)}}}]);