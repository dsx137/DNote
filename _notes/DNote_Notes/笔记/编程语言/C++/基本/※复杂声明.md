---
---

# 复杂声明

声明只是一个约定俗成的规则\
它不一定符合自然语言的逻辑\
看不懂声明一般是遇到了函数指针和数组的声明

## 函数指针声明

`int (*func)()`

这是格式，它的意思是`func=int (*)()`\
即func是一个 _返回类型为int的函数_ 的指针\
第一个括号是为了把指针的声明塞进去\
如果去掉括号，就变成了声明一个函数`int func();`

是的，这个就是你非要把函数写在最下面然后识别不到，最后要在文件最上面写的东西\
实际上函数也是一种变量类型，叫函数类型

## 数组声明

`int a[]`

它的意思是`a=int []`，即为a是一个int型数组

`int *b`、`int *(b)`、`int (*b)`都是int类型的指针\
但`int *b[]`（等于`int *(b[])`）是一个指针数组\
而`int (*b)[]`是指向数组的指针（当x为变量名时，`(*x)`表示x为指向该空间的指针）\
区别在于`b`和`[]`有没有用`()`隔开

如果这一层只有`*`而没有`[]`，那么可以拆掉这一层里面的括号

多维数组或者是指针套娃数组，反正无论是什么数组\
层级都遵循从左到右从高到低\
比如声明一个二维数组的.指针.数组\
`int (*b[])[][]`

## 复合声明

让我们来看这位\
`int(*(*b[5]))()`\
可以简写为`int (**b[])()`\
它把函数指针和数组的声明揉到一起了\
它实际上是`b=int()** [5]`的意思\
在复合声明中，函数指针声明永远在最底一层\
也就是说b是一个数组，数组的元素是函数的双重指针

然后可以上上强度\
如果要声明一个.二维数组的.指针数组.的指针，二维数组的第二层的元素是双重函数指针\
那么应该这样写\
`int (**(*(*b)[5])[5][5])()`

由内而外：

+ 指针
  + `*b`
+ 指针数组.的指针
  + `*(*b)[5]`
+ 二维数组的.指针数组.的指针
  + `(*(*b)[5])[5][5]`
+ 二维数组的第二层的元素是双重函数指针
  + `(**(*(*b)[5])[5][5])()`

由外而内：

+ 双重函数指针的二维数组
  + `(**b[5][5])()`
+ 二维数组的指针
  + `(**(*b)[5][5])()`
+ 指针.数组
  + `(**(*b[5])[5][5])()`
+ .的指针
  + `(**(*(*b)[5])[5][5])()`
